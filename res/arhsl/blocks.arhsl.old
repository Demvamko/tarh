#version 440
#include <structs.arhsl>

inp 0 ivec3 pos;    // layout type name (input);
inp 1 int ao;
inp 2 vec2 uv;

var float fao;  //used as in/out to convert int to float

vert {
    pos += ivec3(chunk.cpos.x * 16, 0, chunk.cpos.y * 16);
    fao = float(ao) / 16.0;
    return camera.proj * camera.view * vec4(vec3(pos), 1);
}

frag {
    vec4 color = texture(voxel_atlas, uv); //uv automatically infered as in/out type
    color.rgb *= fao;
    return color;
}